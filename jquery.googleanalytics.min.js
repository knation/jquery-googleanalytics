/**
 *  Google Analytics plugin for JQuery.
 *  
 *  Copyright (c) 2010 Kirk Morales
 *  http://www.kirkmorales.com/projects/jquery-googleanalytics
 *  
 *  Distributed under the MIT License
 */

var _gaq=_gaq||[];(function(f){function g(h){return typeof(h)}var b="string",e="undefined",a=true,c=false,d=null;f.googleanalytics=function(h){if(g(_gaq)==e){return}var j=f.extend({},f.googleanalytics.defaults,h),k,i;if(g(j.UA)==e){return c}_gaq.push(["_setAccount",j.UA]);if(j.setAllowLinker){_gaq.push(["_setAllowLinker",a])}if(j.setLocalRemoteServerMode){_gaq.push(["_setLocalRemoteServerMode",a])}f.trackPageview(j.Page,j);k=document.createElement("script");k.type="text/javascript";k.async=a;k.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(k,i)};f.googleanalytics.defaults={addSlash:a,setAllowLinker:c,setLocalRemoteServerMode:c,Page:d};f.trackPageview=function(j,h){if(g(_gaq)==e){return}var i=f.extend({},f.trackPageview.defaults,h),k=["_trackPageview"];if(g(j)==b){if(i.addSlash&&j.substring(0,1)!="/"){j="/"+j}k.push(j)}_gaq.push(k)};f.trackPageview.defaults={addSlash:a};f.fn.gaTagDownloads=function(h){if(g(_gaq)==e){return}var i=f.extend({},f.fn.gaTagDownloads.defaults,h);if(i.Prefix.substring(i.Prefix.length-1,1)!="/"){i.Prefix+="/"}return this.each(function(){var k=f(this).attr("href"),j,l;if(k==d){return}j=k.lastIndexOf("/");if(j>-1){l=k.substring(j+1)}else{l=k}f(this).click(function(){f.trackPageview(i.Prefix+l)})})};f.fn.gaTagDownloads.defaults={Prefix:"/downloads/"};f.fn.gaTagMailto=function(h){if(g(_gaq)==e){return}var i=f.extend({},f.fn.gaTagMailto.defaults,h);if(i.Prefix.substring(i.Prefix.length-1,1)!="/"){i.Prefix+="/"}return this.each(function(){var k=f(this).attr("href"),j,l;if(k==d){return}j=k.lastIndexOf("mailto:");if(j>-1){l=k.substring(j+7)}else{return}f(this).click(function(){f.trackPageview(i.Prefix+l)})})};f.fn.gaTagMailto.defaults={Prefix:"/mailto/"};f.fn.gaTagCrossDomain=function(){if(g(_gaq)==e){return}return this.each(function(){var l,h,k,j,i;if(f(this).is("a")){l=f(this).attr("href")}else{if(f(this).is("form")){l=f(this).attr("action")}else{return}}if(l==d||l.indexOf("http")!=0){return}j=location.hostname;h=j.indexOf("//")+2;k=j.indexOf("/",h);j=j.substring(h,((k>-1)?k:j.length));i=l;h=i.indexOf("//")+2;k=i.indexOf("/",h);i=i.substring(h,(k>-1)?k:i.length);if(j==i){return}if(f(this).is("a")){f(this).click(function(){_gaq.push(["_link",l]);return c})}else{if(f(this).is("form")){f(this).submit(function(){_gaq.push(["_linkByPost",this])})}}})};f.trackEvent=function(h){if(g(_gaq)==e){return}var i=f.extend({},f.trackEvent.defaults,h);if(i.Category==d){return}else{if(i.Action==d){return}else{if(i.Label==d){return}else{if(g(i.Value)!="number"){return}}}}_gaq.push(["_trackEvent",i.Category,i.Action,i.Label,i.Value])};f.trackEvent.defaults={Category:d,Action:d,Label:d,Value:d};f.trackTransaction=function(h){if(g(_gaq)==e){return}var l=f.extend({},h),j;if(g(l.Items)!="object"||g(l.OrderID)!=b||g(l.Store)!=b||g(l.Total)!=b||g(l.Tax)!=b||g(l.Shipping)!=b||g(l.City)!=b||g(l.State)!=b||g(l.Country)!=b){return}_gaq.push(["_addTrans",l.OrderID,l.Store,l.Total,l.Tax,l.Shipping,l.City,l.State,l.Country]);for(j=0;j<l.Items.length;j++){var k=l.Items[j];if(g(k.SKU)!=b||g(k.Name)!=b||g(k.Category)!=b||g(k.Price)!=b||g(k.Quantity)!=b){continue}_gaq.push(["_addItem",l.OrderID,k.SKU,k.Name,k.Category,k.Price,k.Quantity])}_gaq.push(["_trackTrans"])}})(jQuery);